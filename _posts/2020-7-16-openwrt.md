---
layout: post
title: Netgear刷openwrt安装ss
category: python
---
参考[openwrt官网](https://openwrt.org)，[Netgear官网](https://netgear.com.cn)。
操作环境：MacOS Catalina。
准备好下列软件：nmrpflash刷机，R6100-V1.0.0.60.img网件r6100官方固件，openwrt-19.07.3-ar71xx-nand-r6100-ubi-factory.img最终要刷的openwrt官方镜像。把它们放在同一个目录下，方便后面操作。下面打开终端，进入上述文件所在目录。

1. 刷网件官方固件。我在网上淘的二手网件r6100，居然不能登录修改配置，只好先刷官方固件。如果你可以进入登录界面，这一步就可以不看了。先把路由器LAN1口与电脑网口直连，打开路由器电源，等一两分钟待连接完成，运行nmrpflash -L，查看到en0加一个ip字样的连接。在终端输入一条命令sudo ./nmrpflash -i en0 -f R6100-V1.0.0.60.img，先不要回车！！先关闭路由器电源。下面很重要，一手放在回车上，一手放在路由器电源上，按下回车之后马上打开路由器电源。嗯，拼人品的时候到了，顺利的话三两分钟就可以完成刷官方固件。如果各种出错，据说重复上面步骤可以解决，没办法啊人品好的人只能说据说啦。
2. 刷openwrt。保持上述连线。刷好Netgear固件，可以正常登录192.168.1.1配置了。在配置也找到升级固件，选择上述openwrt镜像，开刷，又是分分钟的事，很愉快。不早不晚说句重要的话，最好不要刷最新系统，因为软件支持不好。我刷的是15.05.1。
3. 配置openwrt。路由器Internet口与家里宽带LAN口相连，路由器LAN口与电脑网口相连。还是用浏览器打开192.168.1.1页面。Network-wireless，点击Overview的第二个Enable，开启无线wifi，以后电脑与路由器的连接就多一个选择。打开System-administration-router password，设置路由器的登录密码，保存应用后就可以用ssh登录了。在终端输入ssh root@192.168.1.1，提示密码就用刚设置的那个。ssh登录成功后，就可以执行命令操作路由器中的系统了，其实这就是一个linux系统。执行opkg update更新系统安装源。可能会遇到could not lock问题，echo "nameserver 114.114.114.114">/tmp/resolv.conf，rm -f /var/lock/opkg.lock，opkg update可解决。执行opkg install luci-i18n-base-zh-cn添加中文界面，在网页log out再登录就是中文了。
4. 安装配置ss。文件传送到路由器tmp目录scp local_file remote_user@remote_ip:/tmp。折腾了几天，最后在这个网站找到了解决方法，嗯，英文的，慢慢看。http://openwrt-dist.sourceforge.net/